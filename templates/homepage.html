{% extends 'base.html' %} 

{% block head %}
  


<script src="/static/map.js"></script>
<script src="/static/infodivs.js"></script>
<script src="/static/page.js"></script>
<script src="/static/mediaupload.js"></script>
<script src="/static/fontawesome-markers.min.js"></script>

{% endblock %}

{% block body %}



<nav class="navbar navbar-light navbar-fixed-top">
  <a class="navbar-brand" href="/"><img class="navbar-brand" src="/static/logo.png"></a>

  <form class="form-inline" id="nav-form">
    <input class="form-control" type="text" placeholder="Origin" id="origin">
    <input class="form-control" type="text" placeholder="Destination" id="destination">
    <button class="btn btn-success-outline" type="button" id="get-route">Go</button>
  <!-- </form> -->
<!-- !!!!!!!!buttons for pagination here!!!!!! -->
<!--     <div class="btn-group" data-toggle="buttons">
      <label class="btn btn-secondary active" style="margin-bottom:0px;">
        <input type="radio" name="pages" id="page1" autocomplete="off" checked>1
      </label>
      <label class="btn btn-secondary" style="margin-bottom:0px;">
        <input type="radio" name="pages" id="page2" autocomplete="off">2
      </label>
      <label class="btn btn-secondary" style="margin-bottom:0px;">
        <input type="radio" name="pages" id="page3" autocomplete="off">3
      </label>
    </div>
 -->
    <ul class="nav navbar-nav pull-xs-right" id="login-tog">

    {% if name %}
      <li>
        <p class="navbar-text">Welcome, {{name}}</p>
      </li>

    {% else %}

      <li>
    <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Login
    </button>
    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu2">

      <form class="form" role="form" method="post" action="login" accept-charset="UTF-8" id="login-nav">
        <div class="form-group">
           <label class="sr-only" for="inputUsername">Username</label>
           <input type="text" class="form-control" id="inputUsername" placeholder="Username" required>
        </div>
        <div class="form-group">
           <label class="sr-only" for="inputPassword">Password</label>
           <input type="password" class="form-control" id="inputPassword" placeholder="Password" required>

        </div>
        <div class="form-group">
           <button type="button" class="btn btn-success btn-block" id="login-button">Sign in</button>
        </div>
      </form>

      <div class="bottom">
        <div id="not-registered"></div>
        <small>New here?<br></small> <a href="/register">Register</a>
      </div>
    </li>
    {% endif %}

  </ul>
</form>
</nav>




<!-- MAP CONTAINER AND OFFSET -->

<div class="container-fluid">
  <div class="row">

  <div id="map-container" class="fixed col-md-3">
    <div id="map" class="col-md-3"></div>
  </div>

  <div class="col-md-3"></div>


<!-- NEW TAG & QUERIED TAG COLUMN 1 -->

    <div class="col-md-3" id="tag-div-1"></div>

<!-- QUERIED TAG COLUMN 2 -->

    <div class="col-md-3" id="tag-div-2"></div> 


<!-- THIRD TAG COLUMN -->

    <div class="col-md-3" id="tag-div-3"></div> 

</div>  


<!-- MODAL -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="myModalLabel">Add a tag</h4>
      </div>
      <div class="modal-body">
      <form class="form" role="form" id="add-tag-form">
         
        <input type="text" class="form-control" name="add-title" placeholder="Title" style="margin-bottom: 4px;" id="add-title"/>
        <input type="text" class="form-control" name="add-artist" placeholder="Creator" style="margin-bottom: 4px;" id="add-artist"/>
        <fieldset class="form-group" style="margin-top: 0px;">
          <label for="exampleTextarea"></label>
          <textarea class="form-control" id="add-details" placeholder="Details" rows="3"></textarea>
        </fieldset>

        <span id="audioSpace"><label for="audio"><span class="btn btn-default"><i class="fa fa-microphone" aria-hidden="true"></i></span></label><input type="file" style="visibility: hidden; position: absolute;" accept="video/*;capture=camcorder" id="audio"></span>

        <span id="imageSpace"><label for="image"><span class="btn btn-default"><i class="fa fa-picture-o" aria-hidden="true"></i></span></label><input type="file" style="visibility: hidden; position: absolute;" accept="image/*;capture=camcorder" id="image"></span>
        
        <span id="videoSpace"><label for="video"><span class="btn btn-default"><i class="fa fa-video-camera" aria-hidden="true"></i></span></label><input type="file" style="visibility: hidden; position: absolute;" accept="video/*;capture=camcorder" id="video"></span><br>

        <div class="btn-group" data-toggle="buttons"> 

          {% for genre in genres %}

          <label class="btn btn-secondary genre">
              <input type="checkbox" name="genres" id="{{genre.genre}}" value="{{genre.genre}}">{{genre.genre}}
          </label>

          {%endfor%}

          <input type="hidden" id="image_url">
          <input type="hidden" id="audio_url">
          <input type="hidden" id="video_url">

        </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-success" id="submit-tag">Tag it</button>
      </div>
    </form>
    </div>
  </div>
</div>
        



<script>
$('#login-button').click(function(){
    console.log('clicked login');
    $.post('/login.json',{
      'username': $('#inputUsername').val(),
      'password': $('#inputPassword').val()
    }, function(currentUser){
      if (currentUser.name === "not recognized") {
           $('#not-registered').html('<p>Username or password <br> not recognized.</p>'); 
    } else {
      $('#login-tog').html('<li><p class="navbar-text">Welcome, ' + currentUser.name + '</p></li>');
    }
    console.log(currentUser)}
  )})





$(function() {
    while( $('#fitin-div').height() > $('#fitin').height() ) {
        $('#fitin-div').css('font-size', (parseInt($('#fitin-div').css('font-size')) - 1) + "px" );
    }
});
</script>


{% endblock %}


